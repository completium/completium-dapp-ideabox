(this["webpackJsonpcompletium-dapp-ideabox"]=this["webpackJsonpcompletium-dapp-ideabox"]||[]).push([[0],{163:function(e,t,a){e.exports=a(278)},169:function(e,t,a){},175:function(e,t){},177:function(e,t){},245:function(e,t){},247:function(e,t){},260:function(e,t){},262:function(e,t){},278:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(13),c=a.n(o),l=(a(74),a(32)),i=a.n(l),s=a(54),u=a(20),m=(a(169),"KT1QNURPMuFJSmTLRttRutb4gfJ6NS4BfsM6"),d="https://edonet-tezos.giganode.io/",p=a(325),f=a(326),E=a(146),h=a(324),g=a(279),y=a(131),b=a(89),v=Object(y.a)((function(e){var t=e.appName,a=r.a.useState((function(){return{wallet:null,tezos:null,accountPkh:null}})),n=Object(u.a)(a,2),o=n[0],c=o.wallet,l=o.tezos,m=o.accountPkh,d=n[1],p=Boolean(l);r.a.useEffect((function(){return b.a.onAvailabilityChange((function(e){d({wallet:e?new b.a(t):null,tezos:null,accountPkh:null})}))}),[d,t]);var f=r.a.useCallback(function(){var e=Object(s.a)(i.a.mark((function e(t,a){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,c){e.next=3;break}throw new Error("Thanos Wallet not available");case 3:return e.next=5,c.connect(t,a);case 5:return n=c.toTezos(),e.next=8,n.wallet.pkh();case 8:r=e.sent,d({wallet:c,tezos:n,accountPkh:r}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),alert("Failed to connect ThanosWallet: ".concat(e.t0.message));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,a){return e.apply(this,arguments)}}(),[d,c]);return{wallet:c,tezos:l,accountPkh:m,ready:p,connect:f}}),(function(e){return e.wallet}),(function(e){return e.tezos}),(function(e){return e.accountPkh}),(function(e){return e.ready}),(function(e){return e.connect})),x=Object(u.a)(v,6),w=x[0],k=x[1],S=x[2],C=x[3],j=x[4],O=x[5];var I=a(323),T=function(e){var t=j(),a=k();return t?r.a.createElement("div",null):a?r.a.createElement(g.a,{variant:"contained",color:"secondary",disableElevation:!0,size:"small",style:{position:"absolute",right:"90px"},onClick:e.handleConnect},"connect to wallet"):r.a.createElement(I.a,{href:"https://templewallet.com/",rel:"noopener",underline:"none",style:{position:"absolute",right:"90%"}},r.a.createElement(g.a,{variant:"contained",size:"small",disableElevation:!0,style:{backgroundColor:"#ed8936",color:"white",fontWeight:"bold"}},"Install Temple"))},z=a(136),P=a.n(z),N=function(e){var t=Object(h.a)("(min-width:600px)")?"visible":"hidden",a="dark"===e.theme.palette.type;return r.a.createElement(p.a,{position:"static",color:a?"default":"secondary",style:{boxShadow:"none",opacity:1}},r.a.createElement(f.a,null,r.a.createElement(E.a,{variant:"h6",style:{position:"absolute",fontFamily:"Alegreya Sans SC, sans-serif"}},"Completium"),r.a.createElement(E.a,{variant:"h6",style:{flexGrow:1,visibility:t}},e.appTitle),r.a.createElement(T,{handleConnect:e.handleConnect}),r.a.createElement("a",{href:"https://edukera.github.io/completium-landing/docs/dapp-ideabox/presentation",target:"_blank"},r.a.createElement(g.a,{style:{color:"white"},component:"span"},r.a.createElement(P.a,null)))))},R=a(144),B=a(341),W=a(342),A=a(339),F=a(332),L=function(e){return r.a.createElement(p.a,{position:"static",color:"default",style:{boxShadow:"none",opacity:1,heigh:300}},r.a.createElement(f.a,{style:{minHeight:256}},r.a.createElement(E.a,{variant:"body2",color:"textSecondary",style:{flexGrow:1}},"@copyright ",e.appName," 2021")))},M=a(350),U=a(344);function J(e){return r.a.createElement(U.a,Object.assign({elevation:6,variant:"filled"},e))}var _=function(e){return r.a.createElement(M.a,{open:e.open},r.a.createElement(J,{severity:"info",style:{backgroundColor:e.theme.palette.secondary.main}},"Waiting for operation confirmation ..."))},H=a(330),G=a(331),K=a(327),Q=a(333),D=a(88),V=a.n(D),Y=a(137),$=a.n(Y),q=function(e){var t=S(),a=j();return r.a.createElement(H.a,null,r.a.createElement(G.a,null,r.a.createElement(F.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center"},r.a.createElement(F.a,{item:!0,xs:1},e.boxopen&&a?r.a.createElement(K.a,{color:"secondary","aria-label":"upload picture",component:"span",onClick:function(){t.wallet.at(m).then((function(t){t.methods.vote(e.id,1).send().then((function(t){console.log("waiting for ".concat(t.opHash," to be confirmed")),e.openSnack(),t.receipt().then((function(){e.handleReceipt()}))}))}))}},r.a.createElement(V.a,null)):e.boxopen?r.a.createElement("div",null):e.winner?r.a.createElement($.a,{color:"secondary"}):r.a.createElement("div",null)),r.a.createElement(F.a,{item:!0,xs:11},r.a.createElement(F.a,{container:!0,direction:"column",justify:"center",alignItems:"flex-start",spacing:1},r.a.createElement(F.a,{item:!0},r.a.createElement(E.a,{color:e.boxopen||e.winner?"textPrimary":"textSecondary",variant:"h6",align:"left",style:{paddingLeft:12}}," ",e.title," ")),r.a.createElement(F.a,{item:!0},r.a.createElement(E.a,{color:e.boxopen||e.winner?"textPrimary":"textSecondary",variant:"body2",align:"left",style:{paddingLeft:12,paddingRight:12}}," ",e.desc," ")))))),r.a.createElement(Q.a,null),r.a.createElement(G.a,{style:{paddingBottom:16}},r.a.createElement(F.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",style:{paddingLeft:26,paddingRight:12}},r.a.createElement(F.a,{item:!0,xs:9},r.a.createElement(F.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",spacing:3},r.a.createElement(F.a,{item:!0},r.a.createElement(E.a,{color:"textSecondary",style:{fontWeight:"bold"}}," #",e.id," ")),r.a.createElement(F.a,{item:!0},r.a.createElement(F.a,{container:!0,direciton:"row",justify:"flex-start",alignItems:"center",style:{paddingLeft:18}},r.a.createElement(E.a,{color:"textSecondary"},"by: "),r.a.createElement(E.a,{color:"textSecondary",style:{fontSize:14,fontFamily:"Courier Prime, monospace",padding:8,paddingTop:12}},e.author))),r.a.createElement(F.a,{item:!0},r.a.createElement(F.a,{container:!0,direciton:"row",justify:"flex-start",alignItems:"center"},r.a.createElement(E.a,{color:"textSecondary"},"creation: "),r.a.createElement(E.a,{color:"textSecondary",style:{fontSize:14,fontFamily:"Courier Prime, monospace",padding:8,paddingTop:12}},e.creation))))),r.a.createElement(F.a,{item:!0,xs:3},r.a.createElement(F.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center",spacing:1},r.a.createElement(F.a,{item:!0},r.a.createElement(E.a,null," ",e.nbvotes," ")),r.a.createElement(F.a,{item:!0},r.a.createElement(V.a,{fontSize:"small"})))))))},X=a(138),Z=a.n(X),ee=a(334),te=function(e){return r.a.createElement(M.a,{open:!0},r.a.createElement(ee.a,{color:"secondary",onClick:e.onClick},r.a.createElement(Z.a,null)))},ae=a(346),ne=a(343),re=a(4),oe=a(335),ce=a(336),le=a(139),ie=a.n(le),se=a(47),ue=function(e){return e.reduce((function(e,t){return e+t.toString(16).padStart(2,"0")}),"")},me=Object(re.a)((function(e){return{root:{margin:0,padding:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}}))((function(e){var t=e.children,a=e.classes,n=e.onClose;return r.a.createElement(oe.a,{disableTypography:!0,className:a.root},r.a.createElement(E.a,{variant:"h6"},t),r.a.createElement(K.a,{"aria-label":"close",className:a.closeButton,onClick:n},r.a.createElement(ie.a,null)))})),de=Object(re.a)((function(e){return{root:{padding:e.spacing(2)}}}))(ce.a),pe=function(e){var t=S(),a=r.a.useState({title:"",desc:""}),n=Object(u.a)(a,2),o=n[0],c=n[1],l=function(e){"standard-basic"===e.target.id?c({title:e.target.value,desc:o.desc}):c({title:o.title,desc:e.target.value})};return r.a.createElement(ae.a,{open:e.open,onClose:e.onclose,fullWidth:!0},r.a.createElement(me,{id:"customized-dialog-title",onClose:e.onclose},"New idea"),r.a.createElement(de,{dividers:!0,style:{padding:0}},r.a.createElement(F.a,{container:!0,direction:"column"},r.a.createElement(F.a,{item:!0},r.a.createElement(F.a,{container:!0,direction:"row",style:{padding:16},spacing:3},r.a.createElement(F.a,{item:!0},r.a.createElement(E.a,null,"Author:")),r.a.createElement(F.a,null,r.a.createElement(E.a,{color:"textSecondary",style:{fontSize:14,fontFamily:"Courier Prime, monospace",paddingTop:15}},e.account)))),r.a.createElement(Q.a,null),r.a.createElement(F.a,{item:!0,style:{padding:16,paddingBottom:0}},r.a.createElement(ne.a,{id:"standard-basic",label:"Enter idea title",fullWidth:!0,color:"secondary",onChange:l})),r.a.createElement(F.a,{item:!0,style:{padding:16,paddingBottom:0}},r.a.createElement(ne.a,{id:"standard-textarea",label:"Enter idea description",placeholder:"Placeholder",multiline:!0,color:"secondary",fullWidth:!0,rowsMax:5,onChange:l})),r.a.createElement(F.a,{item:!0},r.a.createElement(F.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center",style:{padding:16}},r.a.createElement(g.a,{onClick:function(){console.info(o),t.wallet.at(m).then((function(t){var a=ue(Object(se.compressToUint8Array)(o.title)),n=ue(Object(se.compressToUint8Array)(o.desc));t.methods.add_idea(a,n).send().then((function(t){console.log("waiting for ".concat(t.opHash," to be confirmed")),e.openSnack(),t.receipt().then((function(){e.handleReceipt()})).catch((function(e){return console.log("Error: ".concat(e))}))})).catch((function(e){return console.log("Error: ".concat(e))}))})),e.onclose()}},"submit"))))))},fe=a(337),Ee=a(140),he=a.n(Ee),ge=a(329),ye=a(328),be=a(147),ve=a(338),xe=a(348),we=a(349),ke=["sort by creation","sort by votes","sort by author","sort by id"];function Se(e){var t=r.a.useState(!1),a=Object(u.a)(t,2),n=a[0],o=a[1],c=r.a.useRef(null),l=r.a.useState(1),i=Object(u.a)(l,2),s=i[0],m=i[1],d=function(e){c.current&&c.current.contains(e.target)||o(!1)};return r.a.createElement(F.a,{container:!0,direction:"column",alignItems:"center"},r.a.createElement(F.a,{item:!0,xs:12},r.a.createElement(fe.a,{variant:"outlined",color:"secondary",ref:c,"aria-label":"split button",disableElevation:!0},r.a.createElement(g.a,{onClick:function(){e.onClick(ke[s]),console.info("You clicked ".concat(ke[s]))},disableElevation:!0},ke[s]),r.a.createElement(g.a,{color:"secondary",size:"small","aria-controls":n?"split-button-menu":void 0,"aria-expanded":n?"true":void 0,"aria-label":"select merge strategy","aria-haspopup":"menu",onClick:function(){o((function(e){return!e}))},disableElevation:!0},r.a.createElement(he.a,null))),r.a.createElement(ve.a,{open:n,anchorEl:c.current,role:void 0,transition:!0,disablePortal:!0,style:{zIndex:100}},(function(e){var t=e.TransitionProps,a=e.placement;return r.a.createElement(ye.a,Object.assign({},t,{style:{transformOrigin:"bottom"===a?"center top":"center bottom"}}),r.a.createElement(be.a,null,r.a.createElement(ge.a,{onClickAway:d},r.a.createElement(we.a,{id:"split-button-menu"},ke.map((function(e,t){return r.a.createElement(xe.a,{key:e,disabled:2===t,selected:t===s,onClick:function(e){return function(e,t){m(t),o(!1)}(0,t)}},e)}))))))}))))}var Ce=a(347),je=a(142),Oe=a.n(je),Ie=a(143),Te=a.n(Ie),ze=a(340),Pe=function(e){return r.a.createElement(A.a,{style:{height:"300px"}},r.a.createElement(A.a,{style:{height:"40px"}}),r.a.createElement(be.a,{style:{opacity:.8,paddingLeft:18,paddingRight:18}},"loading"===e.accountState?r.a.createElement(F.a,{container:!0,direction:"row",alignItems:"center",spacing:2,style:{height:64}},r.a.createElement(F.a,{item:!0,xs:12},r.a.createElement(ze.a,{color:"secondary"}))):r.a.createElement(F.a,{container:!0,direction:"row",alignItems:"center",spacing:2},r.a.createElement(F.a,{item:!0,xs:2,direction:"row"},r.a.createElement(E.a,{color:"textSecondary"},"account :")),r.a.createElement(F.a,null,r.a.createElement(E.a,{style:{fontFamily:"Courier Prime, monospace"}},e.account)),e.isvoter?r.a.createElement(F.a,{item:!0,xs:3},r.a.createElement(F.a,{container:!0,direction:"row",justify:"flex-end",spacing:2},r.a.createElement(F.a,{item:!0},r.a.createElement(E.a,{color:"textSecondary"},"Number of votes left:")),r.a.createElement(F.a,{item:!0},r.a.createElement(E.a,null,e.nbvotes)))):r.a.createElement(F.a,{item:!0,xs:3},r.a.createElement(E.a,{color:"error"},"Not registered!")))))},Ne=a(34);function Re(e,t){return e.sort((function(e,a){return"sort by votes"===t?a.nbvotes-e.nbvotes:"sort by creation"===t?a.creation-e.creation:"sort by author"===t?a.author-e.author:"sort by id"!==t||e.id-a.id}))}var Be=function(e){return new Uint8Array(e.match(/.{1,2}/g).map((function(e){return parseInt(e,16)})))};function We(){var e=j(),t=O(),a=C(),n=r.a.useState(null),o=Object(u.a)(n,2),c=(o[0],o[1],r.a.useState({status:!1,ideas:[],votes:[]})),l=Object(u.a)(c,2),p=l[0],f=l[1],E=r.a.useCallback(Object(s.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t("edo2net");case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),alert(e.t0.message);case 8:case 9:case"end":return e.stop()}}),e,null,[[0,5]])}))),[t]),h=r.a.useState(!1),g=Object(u.a)(h,2),y=g[0],b=g[1],v=r.a.useState(!1),x=Object(u.a)(v,2),w=x[0],k=x[1],S=r.a.useState(""),T=Object(u.a)(S,2),z=(T[0],T[1]);function P(){return M.apply(this,arguments)}function M(){return(M=Object(s.a)(i.a.mark((function e(){var t,a,n,r,o,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=new Ne.b(d),e.next=4,t.contract.at(m);case 4:return a=e.sent,e.next=7,a.storage();case 7:n=e.sent,r=[],n.selected.forEach((function(e){return r.push(parseInt(0+e))})),o=[],n.idea.forEach((function(e,t,a){o.push({id:t,title:Object(se.decompressFromUint8Array)(Be(e.title)),desc:Object(se.decompressFromUint8Array)(Be(e.desc)),author:e.author,nbvotes:parseInt(0+e.nbvotes,10),creation:(e.creation+"").substring(0,10),winner:r.includes(parseInt(t))})})),c=[],n.voter.forEach((function(e,t,a){c[t]=parseInt(0+e,10)})),o=Re(o,"sort by creation"),console.log(o),f({status:0+n._state==="00",ideas:o,votes:c}),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(0),console.log("Error: ".concat(e.t0));case 22:case"end":return e.stop()}}),e,null,[[0,19]])})))).apply(this,arguments)}function U(){return void 0!==p.votes&&a in p.votes}0===p.ideas.length&&P().then(console.log("content loaded"));var J=r.a.useMemo((function(){return Object(R.a)({palette:{type:"light",secondary:{light:"#64b5f6",main:"#2196f3",dark:"#1976d2",contrastText:"#fff"}}})}),[!1]),H=function(){b(!1),P().then(console.log("content loaded"))},G=function(){b(!0)};return r.a.createElement("div",{className:"App"},r.a.createElement(B.a,{theme:J},r.a.createElement(W.a,null),r.a.createElement(N,{theme:J,appTitle:"Vote for the best ideas!",handleConnect:E}),r.a.createElement(A.a,{maxWidth:"md",style:{height:120}},e?r.a.createElement(Pe,{account:a,isvoter:U(),nbvotes:p.votes[a]}):r.a.createElement("div",{style:{height:500}})),r.a.createElement(A.a,{maxWidth:"md"},r.a.createElement(F.a,{container:!0,direction:"row",spacing:2,style:{marginBottom:100}},r.a.createElement(F.a,{item:!0,xs:12},r.a.createElement(I.a,{href:"https://better-call.dev/edo2net/KT1QNURPMuFJSmTLRttRutb4gfJ6NS4BfsM6/operations",rel:"noopener",underline:"none",target:"_blank"},r.a.createElement(Ce.a,{label:"Box "+m+(p.status?" is active":" is closed"),color:p.status?"secondary":"default",clickable:!0,onDelete:function(){},deleteIcon:p.status?r.a.createElement(Oe.a,null):r.a.createElement(Te.a,null),variant:"outlined"}))),0===p.ideas.length?r.a.createElement(F.a,{item:!0,xs:12},r.a.createElement(ze.a,{color:"secondary",style:{marginTop:60}})):r.a.createElement(F.a,{item:!0},r.a.createElement(Se,{onClick:function(e){z(e),f({status:p.status,ideas:Re(p.ideas,e),votes:p.votes})}})),p.ideas.map((function(t){return r.a.createElement(F.a,{item:!0,xs:12},r.a.createElement(q,{id:t.id,title:t.title,desc:t.desc,author:t.author,creation:t.creation,nbvotes:t.nbvotes,winner:t.winner,boxopen:p.status&&e&&U(),openSnack:G,handleReceipt:H}))})))),p.status&&e&&U()&&!y?r.a.createElement(te,{onClick:function(){k(!0)}}):r.a.createElement("div",null),r.a.createElement(L,{appName:"IdeaCorp."}),r.a.createElement(pe,{open:w,onclose:function(){k(!1)},theme:J,account:a,openSnack:G,handleReceipt:H}),r.a.createElement(_,{open:y,theme:J})))}var Ae=function(){return r.a.createElement(w,{appName:"IdeaCorp."},r.a.createElement(r.a.Suspense,{fallback:null},r.a.createElement(We,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Ae,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},74:function(e,t,a){}},[[163,1,2]]]);
//# sourceMappingURL=main.b2b6827e.chunk.js.map